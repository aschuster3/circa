{% load static %}
<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="{% static 'css/bootstrap.min.css'%}" rel="stylesheet" media="screen">
    <title>{{ item.title }} | Circa</title>
    <script type="text/javascript">
        function countdown(days, hours, minutes, seconds, display) {
            var d = parseInt(days, 10),
            h = parseInt(hours, 10),
            m = parseInt(minutes, 10),
            s = parseInt(seconds, 10) - 1;

            if(d < 0 || h < 0 || m < 0 || s < 0) {
                display.textContent = "This auction is over!";
            } else {
                setInterval(function() {
                    var displayStr = "The auction ends in " + d + " days, "
                     + h + " hours, " + m + " minutes, and " + s + " seconds";
                    if(--s < 0) {
                        if(--m < 0) {
                            if(--h < 0) {
                                if(--d < 0) {
                                    displayStr = "This auction is over!";
                                } else {
                                    h = 23;
                                }
                            } else {
                                m = 59;
                            }
                        } else {
                            s = 59;
                        }
                    }

                    display.textContent = displayStr;
                }, 1000);
            }
        }
        window.onload = function () {
        var display = document.querySelector('#time');
        countdown({{ days }}, {{ hours }}, {{ minutes }}, {{ seconds }}, display);
        };
  </script>
</head>
<body>
<div class = "navbar navbar-inverse navbar-static-top">
        <div class = "container">
            <a href="/" class = "navbar-brand">Circa<sup>beta</sup></a>
            <div class="navbar-collapse" id="navigation-bar">
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="/sell/">Sell</a></li>
                    <li><a href="/">Login</a></li>
                    <li><a href="/">Help</a></li>
                 </ul>
            </div>
        </div>
</div>
<div class = "container">
    <div class="panel panel-info">
        <div class = "panel-heading"><h1 class = "panel-title">{{ item.title }}</h1></div>
        <div class = "panel-body">
            <div class = "panel-info">
                {{ item.description }}
                <br>
                <em>Ships from zipcode {{ auction.zipcode }}</em>
                Current bid: $<strong>{{ auction.current_bid }}</strong>
                <form action = "/auction/{{ auction.id }}/" method = "post">
                    {% csrf_token %}
                    {{ form.as_p }}
                    <input type = "submit" value = "Place Bid"/>
                </form>
                <h3>You can buy this item right now for ${{ auction.buy_now_price }}</h3>
                <h3><span id="time">The auction ends in {{ days }} days, {{ hours }} hours, {{ minutes }} minutes, and {{ seconds }} seconds</span></h3>
            </div>
        </div>
    </div>
    <p><small>Circa guarantees one day shipping and no-questions-asked returns for 30 days.</small></p>
</div>
</body>
</html>