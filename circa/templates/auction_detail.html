{% extends 'base.html' %}
{% load static %}
{% block head_block %}
    <script type="text/javascript">
        function countdown(days, hours, minutes, seconds, display) {
            var d = parseInt(days, 10),
            h = parseInt(hours, 10),
            m = parseInt(minutes, 10),
            s = parseInt(seconds, 10) - 1;

            if(d < 0 || h < 0 || m < 0 || s < 0) {
                display.textContent = "This auction is over!";
            } else {
                setInterval(function() {
                    var displayStr = " " + d + " days, "
                     + h + " hours, " + m + " minutes, and " + s + " seconds.";
                    if(--s < 0) {
                        if(--m < 0) {
                            if(--h < 0) {
                                if(--d < 0) {
                                    displayStr = "This auction is over!";
                                } else {
                                    h = 23;
                                }
                            } else {
                                m = 59;
                            }
                        } else {
                            s = 59;
                        }
                    }
                    display.textContent = displayStr;
                }, 1000);
            }
        }
        window.onload = function () {
        var display = document.querySelector('#time');
        countdown({{ days }}, {{ hours }}, {{ minutes }}, {{ seconds }}, display);
        };
  </script>
{% endblock %}
{% block body_block %}
<div class = "container">
    <div class="panel panel-info">
        <div class = "panel-heading"><h1 class = "panel-title">{{ item.title }}</h1></div>
        <div class = "panel-body">
            <div class = "panel-info">
                  <div class="row">
                       <div class="col-xs-12 col-md-3">
                           <a href="#" class="thumbnail"><img src="http://placehold.it/225x225" alt="..."> </a>
                       </div>
                       <div class="col-xs-12 col-md-4">
                           {{ item.description }}
                           <br>
                           <br>
                           This auction ends in<strong><span id="time"> <strong>{{ days }} days, {{ hours }} hours, {{ minutes }}
                            minutes, and {{ seconds }} seconds. </span></strong>
                            <br>
                       </div>

                       <div class ="col-xs-12 col-md-5">
                            Current Bid: <strong>${{ item.auction.current_bid }}</strong>
                            <br>
                            <br>
                            <form class="form-inline" action = "/auction/{{ auction.id }}/" method = "post">
                                <div class = "form-group">
                                 {% csrf_token %}
                                 {{ form.as_p }}
                                 <input type = "submit" class ="btn btn-primary" value = "Place Bid"/>
                                 </div>
                            </form>
                            <br>
                            <div class="form-group">
                                <p>Buy now for: <strong>${{ item.auction.buy_now_price }}</strong></p>
                                 <input type = "submit" class ="btn btn-success" value = "Buy Now"/>

                            </div>


                       </div>
                  </div>
            </div>
        </div>
    </div>
    <p><small>Circa guarantees one day shipping and no-questions-asked returns for 30 days.</small></p>
</div>
{% endblock %}